(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1091:function(t,e,a){"use strict";a.r(e);var s=a(7),r=a.n(s),l=a(4),o=a(118);a(203),a(204),a(213),a(216),a(220);function i(t,e,a,s,r,l,o){try{var i=t[l](o),n=i.value}catch(t){return void a(t)}i.done?e(n):Promise.resolve(n).then(s,r)}function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={components:{"v-chart":o.a},metaInfo:{title:"Dashboard"},data:function(){return{sales:[],stock_alerts:[],report_today:{revenue:0,today_purchases:0,today_sales:0,return_sales:0,return_purchases:0},products:[],CurrentMonth:"",loading:!0,echartSales:{},echartProduct:{},echartCustomer:{},echartPayment:{}}},computed:c(c({},Object(l.c)(["currentUser"])),{},{columns_sales:function(){return[{label:this.$t("Reference"),field:"Ref",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Customer"),field:"client_name",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Status"),field:"statut",html:!0,tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Total"),field:"GrandTotal",type:"decimal",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Paid"),field:"paid_amount",type:"decimal",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Due"),field:"due",type:"decimal",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("PaymentStatus"),field:"payment_status",html:!0,sortable:!1,tdClass:"text-left gull-border-none",thClass:"text-left"}]},columns_stock:function(){return[{label:this.$t("ProductCode"),field:"code",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("ProductName"),field:"name",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("warehouse"),field:"warehouse",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Quantity"),field:"quantity",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("AlertQuantity"),field:"stock_alert",tdClass:"text-left",thClass:"text-left",sortable:!1}]},columns_products:function(){return[{label:this.$t("ProductName"),field:"name",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Quantity"),field:"quantity",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Total"),field:"total",tdClass:"text-left",thClass:"text-left",sortable:!1}]}}),methods:{report_with_echart:function(){var t=this;axios.get("chart/report_with_echart").then((function(e){var a=e.data;t.report_today=e.data.report_dashboard.original.report,t.stock_alerts=e.data.report_dashboard.original.stock_alert,t.products=e.data.report_dashboard.original.products,t.sales=e.data.report_dashboard.original.last_sales;t.echartCustomer={color:["#6D28D9","#8B5CF6","#A78BFA","#C4B5FD","#7C3AED"],tooltip:{show:!0,backgroundColor:"rgba(0, 0, 0, .8)"},formatter:function(t){return"".concat(t.name,": (").concat(t.data.value," sales) (").concat(t.percent,"%)")},series:[{name:"Top Customers",type:"pie",radius:"50%",center:"50%",data:a.customers.original,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},t.echartPayment={tooltip:{trigger:"axis"},legend:{data:["Payment sent","Payment received"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:a.payments.original.days},yAxis:{type:"value"},series:[{name:"Payment sent",type:"line",data:a.payments.original.payment_sent},{name:"Payment received",type:"line",data:a.payments.original.payment_received}]},t.echartProduct={color:["#6D28D9","#8B5CF6","#A78BFA","#C4B5FD","#7C3AED"],tooltip:{show:!0,backgroundColor:"rgba(0, 0, 0, .8)"},formatter:function(t){return"".concat(t.name,": (").concat(t.percent,"%)")},series:[{name:"Top Selling Products",type:"pie",radius:"50%",center:"50%",data:a.product_report.original,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},t.echartSales={legend:{borderRadius:0,orient:"horizontal",x:"right",data:["Sales","Purchases"]},grid:{left:"8px",right:"8px",bottom:"0",containLabel:!0},tooltip:{show:!0,backgroundColor:"rgba(0, 0, 0, .8)"},xAxis:[{type:"category",data:a.sales.original.days,axisTick:{alignWithLabel:!0},splitLine:{show:!1},axisLabel:{color:"#c2c6dc",interval:0,rotate:30},axisLine:{show:!0,color:"#c2c6dc",lineStyle:{color:"#c2c6dc"}}}],yAxis:[{type:"value",axisLabel:{color:"#c2c6dc"},axisLine:{show:!1,color:"#c2c6dc",lineStyle:{color:"#c2c6dc"}},min:0,splitLine:{show:!0,interval:"auto"}}],series:[{name:"Sales",data:a.sales.original.data,label:{show:!1,color:"#8B5CF6"},type:"bar",color:"#A78BFA",smooth:!0,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowOffsetY:-2,shadowColor:"rgba(0, 0, 0, 0.3)"}}},{name:"Purchases",data:a.purchases.original.data,label:{show:!1,color:"#0168c1"},type:"bar",barGap:0,color:"#DDD6FE",smooth:!0,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowOffsetY:-2,shadowColor:"rgba(0, 0, 0, 0.3)"}}}]},t.loading=!1})).catch((function(t){}))},GetMonth:function(){var t=new Date;this.CurrentMonth=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]},formatNumber:function(t,e){var a=("string"==typeof t?t:t.toString()).split(".");if(e<=0)return a[0];var s=a[1]||"";if(s.length>e)return"".concat(a[0],".").concat(s.substr(0,e));for(;s.length<e;)s+="0";return"".concat(a[0],".").concat(s)}},mounted:function(){var t,e=this;return(t=r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.report_with_echart();case 2:e.GetMonth();case 3:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,r){var l=t.apply(e,a);function o(t){i(l,s,r,o,n,"next",t)}function n(t){i(l,s,r,o,n,"throw",t)}o(void 0)}))})()}},b=a(2),m=Object(b.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("b-row",[a("b-col",{attrs:{lg:"3",md:"6",sm:"12"}},[a("b-card",{staticClass:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},[a("i",{staticClass:"i-Full-Cart"}),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"text-muted mt-2 mb-0"},[t._v(t._s(t.$t("Sales")))]),t._v(" "),a("p",{staticClass:"text-primary text-24 line-height-1 mb-2"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(t.report_today.today_sales?t.report_today.today_sales:0,2)))])])])],1),t._v(" "),a("b-col",{attrs:{lg:"3",md:"6",sm:"12"}},[a("b-card",{staticClass:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},[a("i",{staticClass:"i-Add-Cart"}),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"text-muted mt-2 mb-0"},[t._v(t._s(t.$t("Purchases")))]),t._v(" "),a("p",{staticClass:"text-primary text-24 line-height-1 mb-2"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(t.report_today.today_purchases?t.report_today.today_purchases:0,2)))])])])],1),t._v(" "),a("b-col",{attrs:{lg:"3",md:"6",sm:"12"}},[a("b-card",{staticClass:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},[a("i",{staticClass:"i-Right-4"}),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"text-muted mt-2 mb-0"},[t._v(t._s(t.$t("SalesReturn")))]),t._v(" "),a("p",{staticClass:"text-primary text-24 line-height-1 mb-2"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(t.report_today.return_sales?t.report_today.return_sales:0,2)))])])])],1),t._v(" "),a("b-col",{attrs:{lg:"3",md:"6",sm:"12"}},[a("b-card",{staticClass:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},[a("i",{staticClass:"i-Left-4"}),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"text-muted mt-2 mb-0"},[t._v(t._s(t.$t("PurchasesReturn")))]),t._v(" "),a("p",{staticClass:"text-primary text-24 line-height-1 mb-2"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(t.report_today.return_purchases?t.report_today.return_purchases:0,2)))])])])],1)],1),t._v(" "),a("b-row",[a("b-col",{attrs:{lg:"8",md:"12",sm:"12"}},[a("b-card",{staticClass:"mb-30"},[a("h4",{staticClass:"card-title m-0"},[t._v(t._s(t.$t("This_Week_Sales_Purchases")))]),t._v(" "),a("div",{staticClass:"chart-wrapper"},[t.loading?t._m(0):t._e(),t._v(" "),t.loading?t._e():a("v-chart",{attrs:{options:t.echartSales,autoresize:!0}})],1)])],1),t._v(" "),a("b-col",{attrs:{col:"",lg:"4",md:"12",sm:"12"}},[a("b-card",{staticClass:"mb-30"},[a("h4",{staticClass:"card-title m-0"},[t._v(t._s(t.$t("Top_Selling_Products"))+" ("+t._s((new Date).getFullYear())+")")]),t._v(" "),a("div",{staticClass:"chart-wrapper"},[t.loading?t._m(1):t._e(),t._v(" "),t.loading?t._e():a("v-chart",{attrs:{options:t.echartProduct,autoresize:!0}})],1)])],1)],1),t._v(" "),a("b-row",[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"card mb-30"},[a("div",{staticClass:"card-body p-2"},[a("h5",{staticClass:"card-title border-bottom p-3 mb-2"},[t._v(t._s(t.$t("StockAlert")))]),t._v(" "),a("vue-good-table",{attrs:{columns:t.columns_stock,styleClass:"order-table vgt-table mb-3","row-style-class":"text-left",rows:t.stock_alerts},scopedSlots:t._u([{key:"table-row",fn:function(e){return["stock_alert"==e.column.field?a("div",[a("span",{staticClass:"badge badge-outline-danger"},[t._v(t._s(e.row.stock_alert))])]):t._e()]}}])})],1)])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"card mb-30"},[a("div",{staticClass:"card-body p-3"},[a("h5",{staticClass:"card-title border-bottom p-3 mb-2"},[t._v(t._s(t.$t("Top_Selling_Products"))+" ("+t._s(t.CurrentMonth)+")")]),t._v(" "),a("vue-good-table",{attrs:{columns:t.columns_products,styleClass:"order-table vgt-table","row-style-class":"text-left",rows:t.products},scopedSlots:t._u([{key:"table-row",fn:function(e){return["quantity"==e.column.field?a("div",[a("span",[t._v(t._s(t.formatNumber(e.row.quantity,2))+" "+t._s(e.row.unit_product))])]):"total"==e.column.field?a("div",[a("span",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(e.row.total,2)))])]):t._e()]}}])})],1)])])]),t._v(" "),a("b-row",[a("b-col",{attrs:{lg:"8",md:"12",sm:"12"}},[a("b-card",{staticClass:"mb-30"},[a("h4",{staticClass:"card-title m-0"},[t._v(t._s(t.$t("Payment_Sent_Received")))]),t._v(" "),a("div",{staticClass:"chart-wrapper"},[a("v-chart",{attrs:{options:t.echartPayment,autoresize:!0}})],1)])],1),t._v(" "),a("b-col",{attrs:{col:"",lg:"4",md:"12",sm:"12"}},[a("b-card",{staticClass:"mb-30"},[a("h4",{staticClass:"card-title m-0"},[t._v(t._s(t.$t("TopCustomers"))+" ("+t._s(t.CurrentMonth)+")")]),t._v(" "),a("div",{staticClass:"chart-wrapper"},[a("v-chart",{attrs:{options:t.echartCustomer,autoresize:!0}})],1)])],1)],1),t._v(" "),a("b-row",[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card mb-30"},[a("div",{staticClass:"card-body p-0"},[a("h5",{staticClass:"card-title border-bottom p-3 mb-2"},[t._v(t._s(t.$t("Recent_Sales")))]),t._v(" "),t.loading?t._e():a("vue-good-table",{attrs:{columns:t.columns_sales,styleClass:"order-table vgt-table","row-style-class":"text-left",rows:t.sales},scopedSlots:t._u([{key:"table-row",fn:function(e){return["statut"==e.column.field?a("div",["completed"==e.row.statut?a("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(t.$t("complete")))]):"pending"==e.row.statut?a("span",{staticClass:"badge badge-outline-info"},[t._v(t._s(t.$t("Pending")))]):a("span",{staticClass:"badge badge-outline-warning"},[t._v(t._s(t.$t("Ordered")))])]):"payment_status"==e.column.field?a("div",["paid"==e.row.payment_status?a("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(t.$t("Paid")))]):"partial"==e.row.payment_status?a("span",{staticClass:"badge badge-outline-primary"},[t._v(t._s(t.$t("partial")))]):a("span",{staticClass:"badge badge-outline-warning"},[t._v(t._s(t.$t("Unpaid")))])]):t._e()]}}],null,!1,2617766521)})],1)])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"typo__p text-right"},[e("div",{staticClass:"spinner sm spinner-primary mt-3"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"typo__p text-right"},[e("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null);e.default=m.exports}}]);